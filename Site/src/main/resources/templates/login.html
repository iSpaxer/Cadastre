<!DOCTYPE html>
<html>
<head>
	<title>Slide Navbar</title>
	<link rel="stylesheet" type="text/css" href="./css/login.css">
	<link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
	<!-- <meta name="csrf-parameter" data-th-content="${_csrf.parameterName}">
	<meta name="csrf-header" data-th-content="${_csrf.headerName}">
	<meta name="csrf-token" data-th-content="${_csrf.token}"> -->
</head>

<head></head>

<body>
	<div class="main">  	
		<input type="checkbox" id="chk" aria-hidden="true">

			<div class="signup">
					<form id="login">
						<label for="chk" aria-hidden="true">Login</label>
						<input type="text" name="username" placeholder="Username" required="", value="alexandr">
						<input type="password" name="password" placeholder="Password" required="", value="alexandr">
						<input id="remember" type="checkbox" name="remember-me" value="true">
						<button>Login</button>
					</form>
			</div>

			<div class="login">
				<form action="/api/login" method="POST" align="center">
					<label for="chk" aria-hidden="true">Sign up</label>
					<input type="text" name="txt" placeholder="User name" required="">
					<input type="email" name="email" placeholder="Email" required="">
					<input type="password" name="password" placeholder="Password" required="">
					<button>Sign up</button>
			</div>
	</div> 

	<script>
		(() => {
			login.onsubmit = async (e) => {
						e.preventDefault();

					let response = await fetch('/login', {
						method: 'POST',
						body: new FormData(login)
					});
					if (response.ok) {
						location.replace("/adminPanel")
					}
				}
			// const asyncForm = document.querySelector("form#login");
			// asyncForm.onsubmit = e => {
			// 	e.preventDefault();
			// 	// const data = new URLSearchParams();
			// 	// data.set("login", asyncForm.querySelector("input[name='login']").value);
			// 	// data.set("password", asyncForm.querySelector("input[name='password']").value);
			// 	// let data;
			// 	// data.set("login" = asyncForm.querySelector("input[name='login']").value, "password" =asyncForm.querySelector("input[name='password']").value);

			// 	let data = new Map();

			// 	data.set("username", asyncForm.querySelector("input[name='username']").value);
			// 	data.set("password", asyncForm.querySelector("input[name='password']").value);

			// 	// const headers = {};
			// 	// headers[document.querySelector("meta[name='csrf-header']").content] = document.querySelector("meta[name='csrf-token']").content;
			// 	// headers['Content-Type'] = 'application/json';

			// 	const headers = {
			// 		'Content-Type': 'application/json'
			// 	};
				
			// 	obj={
			// 		"username": asyncForm.querySelector("input[name='username']").value,
			// 		"password": asyncForm.querySelector("input[name='password']").value
			// 	}
			// 	console.log(headers, obj, data);



				// fetch("/api/login", {
				// 	method: "post",
				// 	headers: {
				// 		'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'
				// 		//"mode":'no-cors'  /\  /\ application/x-www-form-urlencoded application/json
				// 	},
				// 	body: JSON.stringify(obj)
				// })
				// .then(response => {
				// 	if (response.ok) {
				// 		console.log(response.status);
				// 	}
				// });
				
			// };
		})();
	</script> 
</body>
</html>